dataSources:
  transaction-postgres0:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    driverClassName: org.postgresql.Driver
    jdbcUrl: jdbc:postgresql://transaction-postgres0:5432/transaction
    username: admin
    password: admin
  transaction-postgres1:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    driverClassName: org.postgresql.Driver
    jdbcUrl: jdbc:postgresql://transaction-postgres1:5432/transaction
    username: admin
    password: admin

rules:
  - !SHARDING
    tables:
      wallets:
        actualDataNodes: transaction-postgres${0..1}.wallets
        databaseStrategy:
          standard:
            shardingColumn: user_id
            shardingAlgorithmName: uuid_hash
      transactions:
        actualDataNodes: transaction-postgres${0..1}.transactions
        databaseStrategy:
          standard:
            shardingColumn: user_id
            shardingAlgorithmName: uuid_hash
      wallet_types:
        actualDataNodes: transaction-postgres${0..1}.wallet_types
        databaseStrategy:
          standard:
            shardingColumn: creator
            shardingAlgorithmName: uuid_hash

    defaultDatabaseStrategy:
      none:
    shardingAlgorithms:
      uuid_hash:
        type: UUID_HASH
        props:
          shard-count: 2